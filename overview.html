
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Overview &mdash; FABuloso 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FABuloso 0.1 documentation" href="index.html" />
    <link rel="up" title="Reference" href="reference.html" />
    <link rel="next" title="Installation" href="install.html" />
    <link rel="prev" title="Reference" href="reference.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="reference.html" title="Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FABuloso 0.1 documentation</a> &raquo;</li>
          <li><a href="reference.html" accesskey="U">Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="overview">
<span id="id1"></span><h1>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p><strong>FABuloso</strong> is a python tool to easily organize and deploy an <a class="reference external" href="http://www.openstack.org">OpenStack</a> architecture using <a class="reference external" href="http://docs.fabfile.org/">Fabric</a>. <em>FABuloso</em> manages configuration with <strong>components</strong> within <strong>catalogs</strong>.</p>
<div class="section" id="catalogs">
<h2>Catalogs<a class="headerlink" href="#catalogs" title="Permalink to this headline">¶</a></h2>
<p>A <strong>catalog</strong> in <em>FABuloso</em> is a collection of <em>components</em> with certain characteristics in common to deploy an OpenStack architecture. For example, a sample catalog could be <em>folsom</em> which would contain all the components needed to deploy OpenStack Folsom.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently we only manage <em>catalogs</em> as git repositories. In the future more options will be supported.</p>
</div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<p>A <strong>component</strong> is the most fundamental configuration element in <em>FABuloso</em>. It&#8217;s just a python module defining some functions and a <em>component.yml</em> (<a class="reference external" href="http://yaml.org">yaml</a>) defining some <em>metadata</em> and <em>services</em>. A <em>service</em> is a list of functions from that python module that will be executed in the given order.</p>
<p>Components are written in Python using Fabric and can be used to install software, edit its configuration files, create users, enable and start system services, and in short, do anything you could do through Fabric.</p>
<div class="section" id="component-structure">
<span id="id2"></span><h3>Component structure<a class="headerlink" href="#component-structure" title="Permalink to this headline">¶</a></h3>
<p>To see how a <cite>component</cite> looks like we&#8217;re going to use the <cite>nova</cite> component from <a class="reference external" href="https://github.com/StackOps/fabuloso-catalog/tree/master/nova">https://github.com/StackOps/fabuloso-catalog/tree/master/nova</a>.</p>
<div class="section" id="component-yml">
<h4>component.yml<a class="headerlink" href="#component-yml" title="Permalink to this headline">¶</a></h4>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">nova</span>
<span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">nova.py</span>
<span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Operations over OpenStack Nova service</span>

<span class="l-Scalar-Plain">Services</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">install</span>
      <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Install OpenStack Nova from ubuntu packages</span>
      <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">install</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">set_config_file</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">nova_properties</span>
      <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Set properties of the Nova service</span>
      <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">nova_properties</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">start</span>
      <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Start Nova Service</span>
      <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">start</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">validate</span>
      <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Validates nova to operate with it</span>
      <span class="l-Scalar-Plain">methods</span><span class="p-Indicator">:</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">validate_database</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">validate_credentials</span>
          <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">validate_rabbitmq</span>
</pre></div>
</div>
<p>Required fields are:</p>
<ul class="simple">
<li>name: The component name</li>
<li>file: The path to the python module where service methods are</li>
<li>description: A brief description about the component</li>
<li>Services: A list of services that this component exposes. At least one service is needed.</li>
</ul>
<p>A service requires the following fields:</p>
<ul class="simple">
<li>name: The name we will use to execute this service</li>
<li>description: A brief description about the service behavior</li>
<li>methods: A list of function names from the python module</li>
</ul>
</div>
<div class="section" id="nova-py">
<h4>nova.py<a class="headerlink" href="#nova-py" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">install</span><span class="p">(</span><span class="n">cluster</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Generate nova configuration. Execute on both servers&quot;&quot;&quot;</span>

    <span class="n">package_ensure</span><span class="p">(</span><span class="s">&#39;nova-api&#39;</span><span class="p">)</span>
    <span class="n">package_ensure</span><span class="p">(</span><span class="s">&#39;nova-cert&#39;</span><span class="p">)</span>
    <span class="n">package_ensure</span><span class="p">(</span><span class="s">&#39;nova-common&#39;</span><span class="p">)</span>

    <span class="c"># ...</span>


<span class="k">def</span> <span class="nf">set_config_file</span><span class="p">(</span><span class="n">management_ip</span><span class="p">,</span> <span class="n">user</span><span class="o">=</span><span class="s">&#39;nova&#39;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">&#39;stackops&#39;</span><span class="p">,</span>
                    <span class="n">auth_host</span><span class="o">=</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">,</span>
                    <span class="n">auth_port</span><span class="o">=</span><span class="s">&#39;35357&#39;</span><span class="p">,</span> <span class="n">auth_protocol</span><span class="o">=</span><span class="s">&#39;http&#39;</span><span class="p">,</span>
                    <span class="n">mysql_username</span><span class="o">=</span><span class="s">&#39;nova&#39;</span><span class="p">,</span> <span class="n">mysql_password</span><span class="o">=</span><span class="s">&#39;stackops&#39;</span><span class="p">,</span>
                    <span class="n">mysql_schema</span><span class="o">=</span><span class="s">&#39;nova&#39;</span><span class="p">,</span> <span class="n">tenant</span><span class="o">=</span><span class="s">&#39;service&#39;</span><span class="p">,</span>
                    <span class="n">mysql_host</span><span class="o">=</span><span class="s">&#39;127.0.0.1&#39;</span><span class="p">,</span>
                    <span class="n">mysql_port</span><span class="o">=</span><span class="s">&#39;3306&#39;</span><span class="p">):</span>

    <span class="n">f</span> <span class="o">=</span> <span class="s">&#39;/etc/nova/api-paste.ini&#39;</span>

    <span class="n">sudo</span><span class="p">(</span><span class="s">&#39;sed -i &quot;/volume/d&quot; </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">sudo</span><span class="p">(</span><span class="s">&quot;sed -i &#39;s/admin_password.*$/admin_password = </span><span class="si">%s</span><span class="s">/g&#39; </span><span class="si">%s</span><span class="s">&quot;</span>
         <span class="o">%</span> <span class="p">(</span><span class="n">password</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>

    <span class="c"># ...</span>
</pre></div>
</div>
<p>During the <a class="reference internal" href="shell.html#initializing-component"><em>component initialization</em></a> <cite>FABuloso</cite> will ask you for the values of <cite>properties</cite>. Properties are the arguments of the <cite>services</cite> methods.</p>
</div>
</div>
</div>
<div class="section" id="services">
<h2>Services<a class="headerlink" href="#services" title="Permalink to this headline">¶</a></h2>
<p>A <strong>service</strong> is the smallest element in a <em>FABuloso component</em>. A <em>component</em> should have atleast one <em>service</em>. <em>Services</em> are defined in the component <em>metadata</em> and could accept <em>properties</em>. To learn more about how to write a component you would take a look at <a class="reference internal" href="#component-structure"><em>the component structure</em></a>.</p>
</div>
<div class="section" id="environments">
<h2>Environments<a class="headerlink" href="#environments" title="Permalink to this headline">¶</a></h2>
<p><strong>Environments</strong> contain the information used by <em>FABuloso</em> to securely connect over SSH to a <em>target host</em>.</p>
</div>
<div class="section" id="key-pairs">
<h2>Key Pairs<a class="headerlink" href="#key-pairs" title="Permalink to this headline">¶</a></h2>
<p><em>FABuloso</em> can manage <strong>keypairs</strong> in order to securely connect to the target hosts and execute <em>services</em>. <em>Keypairs</em> will be referenced later when <a class="reference internal" href="shell.html#adding-environment"><em>adding environments</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Overview</a><ul>
<li><a class="reference internal" href="#catalogs">Catalogs</a></li>
<li><a class="reference internal" href="#components">Components</a><ul>
<li><a class="reference internal" href="#component-structure">Component structure</a><ul>
<li><a class="reference internal" href="#component-yml">component.yml</a></li>
<li><a class="reference internal" href="#nova-py">nova.py</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#services">Services</a></li>
<li><a class="reference internal" href="#environments">Environments</a></li>
<li><a class="reference internal" href="#key-pairs">Key Pairs</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="reference.html"
                        title="previous chapter">Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="install.html"
                        title="next chapter">Installation</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/overview.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="install.html" title="Installation"
             >next</a> |</li>
        <li class="right" >
          <a href="reference.html" title="Reference"
             >previous</a> |</li>
        <li><a href="index.html">FABuloso 0.1 documentation</a> &raquo;</li>
          <li><a href="reference.html" >Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, StackOps.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>