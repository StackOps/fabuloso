name: mysql
file: mysql.py
description: MySQL database component
provider: fabric

Methods:
    - name: configure
      description: Prepares a mysql service and sets its root password
      params:
        - name: root_pass
          description: Admin password
    - name: configure_all_schemas
      description: Prepares a database and a user password for each StackOps schemas
      params:
        - name: root_pass
          description: Admin password
        - name: password
          description: Common password for all the users
    - name: start
      description: Starts the mysql service
    - name: stop
      description: Stop the mysql service
    - name: setup_schema
      description: Prepares a schema for a given OpenStack component
      params:
        - name: root_pass
          description: Admin password
        - name: schema_name
          description: Set name for the new schema
        - name: drop_previous
          description: Whether script shoud drop previous schema with the same name
          optional: True
        - name: username
          description: User with privileges over this schema
        - name: password
          description: Password for the user
        - name: host
          description: Specify from which host the user will have permissions
          optional: True
    - name: setup_keystone
      description: Creates a new database for keystone and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: keystone_user
          description: Keystone user
        - name: keystone_password
          description: Keystone password
    - name: setup_nova
      description: Creates a new database for nova and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: nova_user
          description: Nova user
        - name: nova_password
          description: Nova password
    - name: setup_glance
      description: Creates a new database for glance and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: glance_user
          description: Glance user
        - name: glance_password
          description: Glance password
    - name: setup_cinder
      description: Creates a new database for cinder and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: cinder_user
          description: Cinder user
        - name: cinder_password
          description: Cinder password
    - name: setup_quantum
      description: Creates a new database for quantum and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: quantum_user
          description: Quantum user
        - name: quantum_password
          description: Quantum password
    - name: setup_portal
      description: Creates a new database for portal and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: portal_user
          description: Portal user
        - name: portal_password
          description: Portal password
    - name: setup_accounting
      description: Creates a new database for accounting and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: accounting_user
          description: Accounting user
        - name: accounting_password
          description: Accounting password
    - name: setup_automation
      description: Creates a new database for accounting and grants privileges on it
      params:
        - name: root_pass
          description: Admin password
        - name: automation_user
          description: Automation user
        - name: automation_password
          description: Automation password

Services:
    - name: setup
      description: Prepares a mysql service and sets its root password
      methods:
          - configure
          - start
    - name: teardown
      description: Stop the mysql service
      methods:
          - stop
    - name: set_all_schemas
      description: Prepares a database and a user password for each StackOps schemas
      methods:
          - configure_all_schemas
    - name: set_keystone
      description: Creates a new database for keystone and grants privileges on it
      methods:
          - setup_keystone
    - name: set_nova
      description: Creates a new database for nova and grants privileges on it
      methods:
          - setup_nova
    - name: set_glance
      description: Creates a new database for glance and grants privileges on it
      methods:
          - setup_glance
    - name: set_cinder
      description: Creates a new database for cinder and grants privileges on it
      methods:
          - setup_cinder
    - name: set_quantum
      description: Creates a new database for quantum and grants privileges on it
      methods:
          - setup_quantum
    - name: set_portal
      description: Creates a new database for portal and grants privileges on it
      methods:
          - setup_portal
    - name: set_accounting
      description: Creates a new database for accounting and grants privileges on it
      methods:
          - setup_accounting
    - name: set_automation
      description: Creates a new database for automation and grants privileges on it
      methods:
          - setup_automation
