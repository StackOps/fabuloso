name: mysql
file: mysql.py
description: MySQL database component
provider: fabric

Methods:
    - name: configure
      description: Prepares a mysql service and sets its root password
      params:
        - name: root_pass
          description: Admin password
    - name: configure_all_schemas
      description: Prepares a database and a user password for each StackOps schemas
      params:
        - name: root_pass
          description: Admin password
        - name: password
          description: Common password for all the users
    - name: start
      description: Starts the mysql service
    - name: stop
      description: Stop the mysql service
    - name: setup_schema
      description: Prepares a schema for a given OpenStack component
      params:
        - name: root_pass
          description: Admin password
        - name: schema_name
          description: Set name for the new schema
        - name: drop_previous
          description: Whether script shoud drop previous schema with the same name
          optional: True
        - name: username
          description: User with privileges over this schema
        - name: password
          description: Password for the user
        - name: host
          description: Specify from which host the user will have permissions
          optional: True


Services:
    - name: setup
      methods:
          - configure
          - start
    - name: teardown
      methods:
          - stop
    - name: set_schema
      methods:
          - setup_schema
    - name: set_all_schemas
      methods:
          - configure_all_schemas
