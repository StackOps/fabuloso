name: keystone
file: keystone.py
description: Operations over OpenStack Keystone module

Methods:
    - name: install
      description:  Install OpenStack Keystone from ubuntu packages
    - name: set_config_file
      description: Modify the /etc/keystone/keystone.conf
      params:
          - name: admin_token
            description: Administration access token/password
          - name: mysql_schema
            description: Keystone mysql schema name
          - name: mysql_username
            description: Keystone mysql user name
          - name: mysql_password
            description: Keystone mysql password
          - name: mysql_host
            description: Connection host.
            optional: True
          - name: mysql_port
            description: Connection port
            optional: True
    - name: configure_users
      description: Prepare the basic Admin user and the StackOps roles
      params:
          - name: admin_token
            description: Administration access token/password
          - name: admin_pass
            description: The password the admin will authenticate through the API
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: tenant_name
            description: Name of the tenant of the services
    - name: define_keystone_service
      description: Register the keystone service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: ks_public_url
            description: Exposed URI to access to this service
          - name: ks_admin_url
            description: Exposed URI to admin_url
          - name: ks_internal_url
            description: Internal URI of this service
          - name: ks_user
            description: Service user
          - name: ks_password
            description: Service password
    - name: define_nova_service
      description: Register the nova service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: nova_public_url
            description: Exposed URI to access to this service
          - name: nova_admin_url
            description: Exposed URI to admin_url
          - name: nova_internal_url
            description: Internal URI of this service
          - name: nova_user
            description: Service user
          - name: nova_password
            description: Service password
    - name: define_ec2_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: ec2_public_url
            description: Exposed URI to access to this service
          - name: ec2_admin_url
            description: Exposed URI to admin_url
          - name: ec2_internal_url
            description: Internal URI of this service
    - name: define_glance_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: glance_public_url
            description: Exposed URI to access to this service
          - name: glance_admin_url
            description: Exposed URI to admin_url
          - name: glance_internal_url
            description: Internal URI of this service
          - name: glance_user
            description: Service user
          - name: glance_password
            description: Service password
    - name: define_quantum_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: quantum_public_url
            description: Exposed URI to access to this service
          - name: quantum_admin_url
            description: Exposed URI to admin_url
          - name: quantum_internal_url
            description: Internal URI of this service
          - name: quantum_user
            description: Service user
          - name: quantum_password
            description: Service password
    - name: define_cinder_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: cinder_public_url
            description: Exposed URI to access to this service
          - name: cinder_admin_url
            description: Exposed URI to admin_url
          - name: cinder_internal_url
            description: Internal URI of this service
          - name: cinder_user
            description: Service user
          - name: cinder_password
            description: Service password
    - name: define_portal_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: portal_public_url
            description: Exposed URI to access to this service
          - name: portal_admin_url
            description: Exposed URI to admin_url
          - name: portal_internal_url
            description: Internal URI of this service
          - name: portal_user
            description: Service user
          - name: portal_password
            description: Service password
    - name: define_accounting_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: accounting_public_url
            description: Exposed URI to access to this service
          - name: accounting_admin_url
            description: Exposed URI to admin_url
          - name: accounting_internal_url
            description: Internal URI of this service
          - name: accounting_user
            description: Service user
          - name: accounting_password
            description: Service password
    - name: define_automation_service
      description: Register the service and the endpoint
      params:
          - name: admin_token
            description: Administration access token/password
          - name: region
            description: Region where the service will be used
          - name: endpoint
            description: Keystone Admin URL endpoint
          - name: automation_public_url
            description: Exposed URI to access to this service
          - name: automation_admin_url
            description: Exposed URI to admin_url
          - name: automation_internal_url
            description: Internal URI of this service
          - name: automation_user
            description: Service user
          - name: automation_password
            description: Service password
     
Services:
    - name: install_and_configure
      methods:
          - install
          - set_config_file
          - configure_users
    - name: register_services_and_endpoints
      methods: 
          - define_keystone_service
          - define_nova_service
          - define_ec2_service
          - define_glance_service
          - define_quantum_service
          - define_cinder_service
    - name: register_portal
      methods:
          - define_portal_service
    - name: register_accounting
      methods:
          - define_accounting_service
    - name: register_automation
      methods:
          - define_automation_service
